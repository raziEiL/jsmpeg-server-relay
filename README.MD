# Руководство настройки JSMpeg Server Relay
JSMpeg Server Relayr — позволяет объединить несколько трансляции на одной веб странице.  

* Прием данных по протоколу [MPEG-TS](https://ru.wikipedia.org/wiki/MPEG-TS) через HTTP в формате цифрового сжатия аудио и видео [MPEG1](https://en.wikipedia.org/wiki/MPEG-1)
* Поддержка множества трансляций на один порт сервера
* Трансляции отображаются на веб странице с помощью [jsmpeg](https://github.com/cycjimmy/jsmpeg-player) плеера

# Клиент
Начать трансляцию на сервер можно с помощью приложения [JSMpeg Webcam Broadcaster](https://github.com/raziEiL/jsmpeg-webcam-broadcaster).  

# Настройки
[Переменные среды](https://en.wikipedia.org/wiki/Environment_variable) применяемые для настройки сервера.

| Переменные среды (ENV) | Описание | Значение по умолчанию |
|-|-|-|
| STREAM_KEY | Ключ для подключения клиента | не задано |
| ALLOW_MULTISTREAM | Значение `true` разрешает несколько трансляций с одного IP адреса, `false` запрещает | `false` |
| BROADCASTERS_LIMIT | Максимальное количество трансляций | `10` |
| PORT | Порт HTTP сервера | `80` |  

# Интеграция с OBS
Отобразите веб страницу с трансляциями на стриме.   
Для этого выполните следующие шаги: 
1. Скопируйте URL страницы из браузера (по умолчанию: http://localhost:80)
2. В OBS создайте новый источник `Браузер` и вставьте ранее скопированный URL в поле `Адрес URL`
3. Поставьте чекбокс :ballot_box_with_check: напротив `Отключать, когда не видим` и `Обновить браузер, когда сцена становиться активной`

## Примечание
* Чтобы отредактировать камеры в источниках OBS нажмите на `Браузер` -> `Взаимодействовать`.
* Если OBS показывает не актуальную информацию выберете `Браузер` в источниках и нажмите `Обновить`.
* По умолчанию OBS применяет прозрачный фон к страницам. Чтобы сделать фон непрозрачным удалите свойство `background-color` или все свойства из поля CSS.

# Изменение дизайна через OBS
Для изменения дизайна отредактируйте поле CSS выбрав `Браузер` в `Источники` OBS. 
## Фон
За фоновый цвет (подложку) отвечает CSS свойство `background-color` элемента `body`. По умолчанию используется белый цвет фона, в примере ниже розовый.
```css
body {
    background-color: hotpink;
}
```
В этом примере прозрачный фон.
```css
body {
    background-color: rgba(0, 0, 0, 0);
}
```
## Цвета команд
Используют класс `.team-a` и `.team-b` для изменения цвета командных рамок. Изменим цвет на зеленый для первой команды и желтый для второй.
```css
.team-a {
    background-color: green;
}
.team-b {
    background-color: yellow;
}
```
# Контакты
По вопросам сотрудничества свяжитесь со мной через:  
mr.raz4291@gmail.com  
[Steam](http://steamcommunity.com/id/raziEiL)  
[Discord сервер Alliance](https://discord.gg/pQPzazkpBq)
